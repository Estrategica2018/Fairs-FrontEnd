<ion-app [class.dark-theme]="dark">
<ion-header translucent="true">
  <ion-toolbar>
    <ion-buttons *ngIf="!showSearchbar" slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
	<div class="d-flex">
	  <ion-img *ngIf="!dark" class="icon-logo" src="assets/icon/icon.png"></ion-img>
	  <ion-img *ngIf="dark" class="icon-logo" src="assets/icon/icon-black.png"></ion-img>
      <ion-label *ngIf="!showSearchbar" class="title-fair"> XI Feria Ganadera 2021 </ion-label>
	</div>
	<ion-buttons slot="end" class="d-none d-md-block">
	  <ion-button routerLink="/login/" routerLinkActive="selected" routerDirection="root" detail="false" *ngIf="!loggedIn" fill="outline" shape="round" color="primary" class="end-menu-button">
        <ion-icon slot="start" ios="ios-person" md="person"></ion-icon>
         Acceder
      </ion-button>
	  <ion-item *ngIf="loggedIn" routerLink="/account" routerLinkActive="active" routerDirection="root" detail="false">
        <ion-icon slot="start" ios="ios-person" md="person"></ion-icon>
         Cuenta
      </ion-item>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
  <ion-split-pane contentId="main-content">

    <ion-menu contentId="main-content" class="menu-main-content">
      <ion-content>
        <ion-list lines="none">
          <ion-menu-toggle autoHide="false">
            <ion-item routerLink="/app/tabs/map" routerLinkActive="selected" routerDirection="root" detail="false">
              <ion-icon slot="start" [name]="'map-outline'"></ion-icon>
              <ion-label>
                Mapa
              </ion-label>
            </ion-item>
          </ion-menu-toggle>
		  <ion-menu-toggle autoHide="false">
            <ion-item routerLink="/app/tabs/schedule" routerLinkActive="selected" routerDirection="root" detail="false">
              <ion-icon slot="start" [name]="'calendar-outline'"></ion-icon>
              <ion-label>
                Agenda
              </ion-label>
            </ion-item>
          </ion-menu-toggle>
          <ion-menu-toggle autoHide="false">
            <ion-item routerLink="/app/tabs/speakers" routerLinkActive="selected" routerDirection="root" detail="false">
              <ion-icon slot="start" [name]="'people-outline'"></ion-icon>
              <ion-label>
                Conferencistas
              </ion-label>
            </ion-item>
          </ion-menu-toggle>
		  <ion-menu-toggle auto-hide="false">
            <ion-item routerLink="/app/tabs/news" routerLinkActive="selected" routerDirection="root" detail="false">
			  <ion-icon slot="start" name="newspaper-outline"></ion-icon>
              <ion-label class="menu-label">Noticias</ion-label>
            </ion-item>
          </ion-menu-toggle>
          <ion-menu-toggle autoHide="false">
            <ion-item routerLink="/app/tabs/about" routerLinkActive="selected" routerDirection="root" detail="false">
              <ion-icon slot="start" [name]="'information-circle-outline'"></ion-icon>
              <ion-label>
                Acerca de
              </ion-label>
            </ion-item>
          </ion-menu-toggle>		  
        </ion-list>
		
		<ion-list class="border-botton">
		  <ion-menu-toggle auto-hide="false" class="pavilions-menu" *ngFor="let pavilion of pavilionsList">
		    <ion-item (click)="selectedIndex='pavilion_id_'+pavilion.id; showPavilionsMenu=showPavilionsMenu==='pavilion_id_'+pavilion.id?'none':'pavilion_id_'+pavilion.id; onOpenPavilion(pavilion.id);" 
					  href="javascript:void(0)" 
					  lines="none" detail="false" [class.selected]="selectedIndex==='pavilion_id_'++pavilion.id">
			  <ion-icon slot="start" name="albums-outline"></ion-icon>
              <ion-label class="menu-label">{{pavilion.name}}</ion-label>
			  <ion-icon slot="end" name="chevron-down-outline" size="small" *ngIf="showPavilionsMenu!== 'pavilion_id_'+pavilion.id"></ion-icon>
			  <ion-icon slot="end" name="chevron-up-outline" size="small" *ngIf="showPavilionsMenu === 'pavilion_id_'+pavilion.id"></ion-icon>
            </ion-item>
			<div *ngIf="showPavilionsMenu==='pavilion_id_'+pavilion.id">
				<ion-item (click)="selectedIndex='pavilion_id_'+pavilion.id+'_stands'; 
						  showPavilionsSubMenu=showPavilionsSubMenu==='pavilion_id_'+pavilion.id? false: 'pavilion_id_'+pavilion.id; 
						  onOpenLocalPavilion(pavilion.id);" href="javascript:void(0)" lines="none" detail="false" class="sub-menu" 
						  [class.selected]="selectedIndex==='pavilion_id_'+pavilion.id+'_stands'">
				  <ion-icon slot="start" name="chevron-forward-outline" size="small" *ngIf="showPavilionsSubMenu!=='pavilion_id_'+pavilion.id"></ion-icon>
				  <ion-icon slot="start" name="chevron-down-outline" size="small" *ngIf="showPavilionsSubMenu==='pavilion_id_'+pavilion.id"></ion-icon>
				  <ion-label class="menu-label">Locales comerciales</ion-label>
				</ion-item>
				<div *ngIf="showPavilionsSubMenu==='pavilion_id_'+pavilion.id">
					<ion-item *ngFor="let stand of pavilion.stands" 
							  (click)="selectedIndex='pavilion_id_'+pavilion.id+'_stand_'+stand.id;
							  onOpenStand(stand.id);" 
							  href="javascript:void(0)" lines="none" detail="false" class="sub-menu-stand" 
							  [class.selected]="selectedIndex==='pavilion_id_'+pavilion.id+'_stand_'+stand.id">
					  <ion-icon slot="start" name="chevron-forward-outline" size="small"></ion-icon>
					  <ion-label class="menu-label">{{stand.merchant.name}}</ion-label>
					</ion-item>
				</div>
				<ion-item (click)="selectedIndex='pavilion_id_2_room';onOpenRoomPavilion(2);" href="javascript:void(0)" lines="none" detail="false" class="sub-menu" [class.selected]="selectedIndex==='pavilion_id_2_room'">
				  <ion-icon slot="start" name="chevron-forward-outline" size="small"></ion-icon>
				  <ion-label class="menu-label">Auditorios</ion-label>
				</ion-item>
			</div>
          </ion-menu-toggle>         
        </ion-list>

        <ion-list *ngIf="loggedIn" lines="none" class="border-botton">
          
          <ion-menu-toggle autoHide="false">
            <ion-item routerLink="/account" routerLinkActive="active" routerDirection="root" detail="false">
              <ion-icon slot="start" name="person"></ion-icon>
              <ion-label>
                Cuenta
              </ion-label>
            </ion-item>
          </ion-menu-toggle>

          <ion-menu-toggle autoHide="false">
            <ion-item button (click)="logout()" detail="false">
              <ion-icon slot="start" name="log-out"></ion-icon>
              <ion-label>
                Salir
              </ion-label>
            </ion-item>
          </ion-menu-toggle>

        </ion-list>

        
        <ion-list *ngIf="!loggedIn" class="border-botton ion-text-center access">
		  <ion-menu-toggle autoHide="false" class="ion-text-center"> 
		    <ion-note class="login-note ion-text-start font-light">Accede para dar participar en los eventos, realizar comentarios y suscribirte a los comercios.</ion-note>
            
			<ion-button fill="outline" shape="round" routerLink="/login/" routerLinkActive="selected" routerDirection="root">
                <ion-icon slot="start" ios="ios-person" md="person"></ion-icon>
                Acceder
            </ion-button>
          </ion-menu-toggle> 
        </ion-list>
        
		<!--ion-list class="border-botton ion-text-center nav-title"-->
		<ion-list lines="none">
		  <ion-menu-toggle auto-hide="false">
		    <ion-item routerLink="/app/tabs/library" routerLinkActive="selected" routerDirection="root" detail="false">
              <ion-icon slot="start" name="albums-sharp"></ion-icon>
              <ion-label class="menu-label">Biblioteca</ion-label>
            </ion-item>
          </ion-menu-toggle>
          <ion-menu-toggle auto-hide="false">
            <ion-item routerLink="/app/tabs/history" routerLinkActive="selected" routerDirection="root" detail="false">
			  <ion-icon slot="start" name="refresh-sharp"></ion-icon>
              <ion-label class="menu-label">Historial</ion-label>
            </ion-item>
          </ion-menu-toggle>
          <ion-menu-toggle auto-hide="false">
		    <ion-item routerLink="/app/tabs/memories" routerLinkActive="selected" routerDirection="root" detail="false">
              <ion-icon slot="start" ios="ios-bookmarks-outline" md="bookmarks-sharp"></ion-icon>
              <ion-label class="menu-label">Lo mejor de la feria</ion-label>
            </ion-item>
          </ion-menu-toggle>
        </ion-list>
		
        <ion-list lines="none">
          <ion-list-header>
            Tutorial
          </ion-list-header>
          <ion-menu-toggle autoHide="false">
            <ion-item button (click)="openTutorial()" detail="false">
              <ion-icon slot="start" name="hammer"></ion-icon>
              <ion-label>Ver Tutorial</ion-label>
            </ion-item>
          </ion-menu-toggle>
		  
		  <ion-menu-toggle autoHide="false">
            <ion-item routerLink="/support" routerLinkActive="active" routerDirection="root" detail="false">
              <ion-icon slot="start" name="help"></ion-icon>
              <ion-label>
                Soporte
              </ion-label>
            </ion-item>
			
			<ion-item>
				<ion-icon slot="start" name="moon-outline"></ion-icon>
				<ion-label>
					Dark Mode
				</ion-label>
				<ion-toggle [(ngModel)]="dark" (ionChange)="onChangeDarkModel($event)"></ion-toggle>
			</ion-item>
          </ion-menu-toggle>

        </ion-list>
      
        <ion-list class="border-botton ion-text-center">  
          <ion-item>
              <ion-label class="font-light menu-label">© 2021 Estratégica S.A </ion-label>
          </ion-item>
        </ion-list>
      </ion-content>
    </ion-menu>

    <ion-router-outlet id="main-content"></ion-router-outlet>

  </ion-split-pane>

</ion-app>
