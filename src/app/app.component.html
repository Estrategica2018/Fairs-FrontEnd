<ion-app [class.dark-theme]="dark">
<ion-header translucent="true">
  <ion-toolbar color="light" [ngClass]="{'full-screen': fullScreen}">
    <ion-buttons *ngIf="!showSearchbar" slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <div class="d-flex">
      <ion-img *ngIf="!dark" class="icon-logo" [src]="fair?.social_media?.icon"></ion-img>
      <ion-img *ngIf="dark" class="icon-logo" [src]="fair?.social_media?.iconNight"></ion-img>
      <ion-label *ngIf="!showSearchbar" class="title-fair"> {{fair?.description}} </ion-label>
    </div>
    <ion-buttons slot="end" class="d-none d-md-block">
      <ion-button color="secondary" routerLink="/login/" routerLinkActive="selected" routerDirection="root" *ngIf="!loggedIn" fill="outline" shape="round" class="end-menu-button">
        <ion-icon slot="start" ios="ios-person" md="person"></ion-icon>
         Acceder
      </ion-button>
      <ion-item *ngIf="loggedIn" routerLink="/account" routerLinkActive="active" routerDirection="root" detail="false">
        <ion-icon slot="start" ios="ios-person" md="person"></ion-icon>
         Cuenta
      </ion-item>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
  <ion-split-pane contentId="main-content">

    <ion-menu [ngClass]="{'full-screen': fullScreen}" contentId="main-content" class="menu-main-content">
      <ion-content>
        <ion-list lines="none" class="border-botton">
          <ion-list-header class="md hydrated">Super Administrador </ion-list-header>
          <ion-menu-toggle autoHide="false">
            <ion-item routerLink="/super-admin/fair" routerLinkActive="active" routerDirection="root" detail="false">
              <ion-icon slot="start" name="map-outline"></ion-icon>
              <ion-label>
                Administrar Feria
              </ion-label>
            </ion-item>
          </ion-menu-toggle>
        </ion-list>


        <ion-list lines="none">
          <ion-menu-toggle autoHide="false">
		    <div *ngFor="let scene of fair?.resources;let i = index">
			  <div *ngIf="scene.show">
                <ion-item [routerLink]="'/map/fair/'+i" routerLinkActive="selected" routerDirection="root" 
			              (click)="showPavilionDetail = null">
                  <ion-icon slot="start" [name]="scene.menuIcon"></ion-icon>
                  <ion-label>
                    {{scene.title}}
                  </ion-label>
                </ion-item>
			  </div>
			</div>
            <div *ngFor="let pavilion of fair?.pavilions;let i = index">
              <ion-item 
			          [routerLink]="'/map/pavilion'+(i+1)+'/'+pavilion.id+'/0'" routerLinkActive="selected" routerDirection="root" 
					  (click)="showStandDetail = null;
                               showPavilionDetail =  showPavilionDetail === 'pavilion_id_'+pavilion.id ?  null : 'pavilion_id_'+pavilion.id"
                      class="pavilions-menu"
					  button="true"
                      lines="none">
                <ion-icon slot="start" name="albums-outline"></ion-icon>
                <ion-label class="menu-label">{{pavilion.name}}</ion-label>
                <ion-icon slot="end" name="chevron-down-outline" size="small" *ngIf="showPavilionDetail !== 'pavilion_id_'+pavilion.id"></ion-icon>
                <ion-icon slot="end" name="chevron-up-outline" size="small" *ngIf="showPavilionDetail === 'pavilion_id_'+pavilion.id"></ion-icon>
              </ion-item>
            
              <div *ngIf="showPavilionDetail ==='pavilion_id_'+pavilion.id">
                <ion-item *ngIf="pavilion.hasSceneStands" 
						  routerLink="/maps/pavilion-stands/{{pavilion.id}}/{{pavilion.hasSceneStands}}" 
						  routerLinkActive="selected" routerDirection="root" 
                          (click)="showStandDetail =  showStandDetail ==='pavilion_id_'+pavilion.id ? null : 'pavilion_id_'+pavilion.id"
                          lines="none" 
						  button="true"
						  class="sub-menu">
                  <ion-icon slot="start" name="chevron-forward-outline" size="small"></ion-icon>
                  <ion-label class="menu-label">Locales comerciales </ion-label>
                </ion-item>

                <div *ngIf="showStandDetail ==='pavilion_id_'+pavilion.id || !pavilion.hasSceneStands">
                    <ion-item [routerLink]="'/maps/stand'+(i_stand+1)+'/'+pavilion.id+'/'+stand.id" routerLinkActive="selected" routerDirection="root" 
                              *ngFor="let stand of pavilion.stands;let i_stand = index"
                              lines="none" class="sub-menu-stand">
                      <ion-icon slot="start" name="chevron-forward-outline" size="small"></ion-icon>
                      <ion-label class="menu-label">{{stand.merchant.name}}</ion-label>
                    </ion-item>
                </div>
             </div>
          </div>
        </ion-menu-toggle>
        </ion-list>
          

         <ion-list lines="none" class="border-botton">
          <ion-menu-toggle autoHide="false">
            <ion-item 
			(click)="showPavilionDetail = null"
			routerLink="/app/tabs/schedule" routerLinkActive="selected" routerDirection="root" detail="false">
              <ion-icon slot="start" [name]="'calendar-outline'"></ion-icon>
              <ion-label>
                Agenda
              </ion-label>
            </ion-item>
          </ion-menu-toggle>
          <ion-menu-toggle autoHide="false">
            <ion-item 
			(click)="showPavilionDetail = null"
			routerLink="/app/tabs/speakers" routerLinkActive="selected" routerDirection="root" detail="false">
              <ion-icon slot="start" [name]="'people-outline'"></ion-icon>
              <ion-label>
                Conferencistas
              </ion-label>
            </ion-item>
          </ion-menu-toggle>
          <ion-menu-toggle auto-hide="false">
            <ion-item (click)="showPavilionDetail = null"
			routerLink="/app/tabs/news" routerLinkActive="selected" routerDirection="root" detail="false">
              <ion-icon slot="start" name="newspaper-outline"></ion-icon>
              <ion-label class="menu-label">Noticias</ion-label>
            </ion-item>
          </ion-menu-toggle>
          <ion-menu-toggle autoHide="false">
            <ion-item 
			(click)="showPavilionDetail = null"
			routerLink="/app/tabs/about" routerLinkActive="selected" routerDirection="root" detail="false">
              <ion-icon slot="start" [name]="'information-circle-outline'"></ion-icon>
              <ion-label>
                Acerca de
              </ion-label>
            </ion-item>
          </ion-menu-toggle>          
        </ion-list>
        

        <ion-list *ngIf="loggedIn" lines="none" class="border-botton">
          
          <ion-menu-toggle autoHide="false">
            <ion-item routerLink="/account" routerLinkActive="active" routerDirection="root" detail="false">
              <ion-icon slot="start" name="person"></ion-icon>
              <ion-label>
                Cuenta
              </ion-label>
            </ion-item>
          </ion-menu-toggle>

          <ion-menu-toggle autoHide="false">
            <ion-item button (click)="presentLogout()" detail="false">
              <ion-icon slot="start" name="log-out"></ion-icon>
              <ion-label>
                Salir
              </ion-label>
            </ion-item>
          </ion-menu-toggle>

        </ion-list>

        
        <ion-list *ngIf="!loggedIn" class="border-botton ion-text-center access">
          <ion-menu-toggle autoHide="false" class="ion-text-center"> 
            <ion-note class="login-note ion-text-start font-light">Accede para dar participar en los eventos, realizar comentarios y suscribirte a los comercios.</ion-note>
            
            <ion-button color="secondary" fill="outline" shape="round" routerLink="/login/" routerLinkActive="selected" routerDirection="root">
                <ion-icon slot="start" ios="ios-person" md="person"></ion-icon>
                Acceder
            </ion-button>
          </ion-menu-toggle> 
        </ion-list>
        
        <!--ion-list class="border-botton ion-text-center nav-title"-->
        <ion-list lines="none" class="border-botton">
          <ion-menu-toggle auto-hide="false">
            <ion-item routerLink="/app/tabs/library" routerLinkActive="selected" routerDirection="root" detail="false">
              <ion-icon slot="start" name="albums-sharp"></ion-icon>
              <ion-label class="menu-label">Biblioteca</ion-label>
            </ion-item>
          </ion-menu-toggle>
          <ion-menu-toggle auto-hide="false">
            <ion-item routerLink="/app/tabs/history" routerLinkActive="selected" routerDirection="root" detail="false">
              <ion-icon slot="start" name="refresh-sharp"></ion-icon>
              <ion-label class="menu-label">Historial</ion-label>
            </ion-item>
          </ion-menu-toggle>
          <ion-menu-toggle auto-hide="false">
            <ion-item routerLink="/app/tabs/memories" routerLinkActive="selected" routerDirection="root" detail="false">
              <ion-icon slot="start" ios="ios-bookmarks-outline" md="bookmarks-sharp"></ion-icon>
              <ion-label class="menu-label">Lo mejor de la feria</ion-label>
            </ion-item>
          </ion-menu-toggle>
        </ion-list>
        
        <ion-list lines="none">
          <ion-list-header>
            Tutorial
          </ion-list-header>
          <ion-menu-toggle autoHide="false">
            <ion-item button (click)="openTutorial()" detail="false">
              <ion-icon slot="start" name="hammer"></ion-icon>
              <ion-label>Ver Tutorial</ion-label>
            </ion-item>
          </ion-menu-toggle>
          
          <ion-menu-toggle autoHide="false">
            <ion-item routerLink="/support" routerLinkActive="active" routerDirection="root" detail="false">
              <ion-icon slot="start" name="help"></ion-icon>
              <ion-label>
                Soporte
              </ion-label>
            </ion-item>
            
            <ion-item>
                <ion-icon slot="start" name="moon-outline"></ion-icon>
                <ion-label>
                    Dark Mode
                </ion-label>
                <ion-toggle [(ngModel)]="dark" (ionChange)="onChangeDarkModel()"></ion-toggle>
            </ion-item>
          </ion-menu-toggle>

        </ion-list>
      
        <ion-list class="border-botton ion-text-center">  
          <ion-item>
              <ion-label class="font-light menu-label">© 2021 Estratégica S.A </ion-label>
          </ion-item>
        </ion-list>
      </ion-content>
    </ion-menu>
    <ion-router-outlet id="main-content"></ion-router-outlet>

  </ion-split-pane>

</ion-app>
